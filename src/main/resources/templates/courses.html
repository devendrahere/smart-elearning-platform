<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Courses - EduSmart</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- External CSS -->
    <link th:href="@{/css/courses.css}" rel="stylesheet">
</head>

<body>

<th:block th:replace="~{fragments/header :: header}"></th:block>

<div class="container">

    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">ðŸ“˜ Explore Courses</h1>
        <p class="page-subtitle">Find courses that match your learning path</p>
    </div>

    <!-- Search -->
    <div class="search-box">
        <input id="searchInput" type="search" class="form-control" placeholder="Search courses...">
        <button id="clearBtn" class="btn-clear">Clear</button>
    </div>

    <!-- Course List -->
    <div id="courseList" class="course-grid">

        <!-- Empty State -->
        <div th:if="${#lists.isEmpty(courses)}" class="empty-state">
            <div class="empty-state-icon">ðŸ“­</div>
            <p class="empty-state-text">No courses available at the moment</p>
        </div>

        <!-- Course Cards -->
        <div class="course-card"
             th:each="course : ${courses}"
             th:attr="data-title=${course.courseTitle}">
            <div>
                <h5 class="card-title" th:text="${course.courseTitle}"></h5>
                <p class="card-desc" th:text="${course.courseDescription}"></p>
            </div>

            <div>
                <div class="meta-row">
                    <span th:text="${course.instructor.name}"></span>
                    <span th:text="${#temporals.format(course.createdAt, 'dd MMM yyyy')}"></span>
                </div>
                <a th:href="@{'/courses/' + ${course.courseId}}"
                   class="btn-view">View Course</a>
            </div>
        </div>

    </div>
</div>

<th:block th:replace="~{fragments/footer :: footer}"></th:block>

<script>
    const searchInput = document.getElementById('searchInput');
    const courseList = document.getElementById('courseList');
    const clearBtn = document.getElementById('clearBtn');

    searchInput?.addEventListener('input', function() {
        const query = this.value.toLowerCase();
        const cards = courseList.querySelectorAll('[data-title]');
        cards.forEach(card => {
            const title = card.getAttribute('data-title').toLowerCase();
            card.style.display = title.includes(query) ? 'flex' : 'none';
        });
    });

    clearBtn?.addEventListener('click', () => {
        searchInput.value = '';
        searchInput.dispatchEvent(new Event('input'));
    });
</script>

</body>
</html>