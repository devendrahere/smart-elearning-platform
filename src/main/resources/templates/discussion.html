<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Course Discussions - EduSmart</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- External CSS -->
    <link rel="stylesheet" th:href="@{/css/discussions.css}">
</head>

<body>
<th:block th:replace="~{fragments/header :: header}"></th:block>

<div class="container">

    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">ðŸ’¬ Course Discussions</h1>
        <p class="page-subtitle">Participate in meaningful discussions and ask questions</p>
    </div>

    <!-- Empty State -->
    <div th:if="${#lists.isEmpty(threads)}" class="empty-state">
        <div class="empty-state-icon">ðŸ“­</div>
        <p class="empty-state-text">No discussions yet. Be the first to start one!</p>
    </div>

    <!-- Thread List -->
    <div th:each="t : ${threads}" class="thread-card">
        <div class="thread-title" th:text="${t.title}">Thread Title</div>

        <div class="thread-meta">
            Created by:
            <span th:text="${t.createdByName != null ? t.createdByName : 'Unknown'}"></span>
            â€¢
            <span th:text="${#temporals.format(t.createdAt, 'dd MMM yyyy, HH:mm')}">Date</span>
        </div>

        <a th:href="@{'/discussion/thread/' + ${t.threadId}}" class="view-btn">View Thread â†’</a>
    </div>

    <!-- New Thread Form -->
    <div class="new-thread-section">
        <h2 class="section-title">âž• Start a New Discussion</h2>

        <form th:action="@{'/discussion/course/' + ${courseId} + '/new-thread'}"
              method="post">

            <input type="hidden" name="createdBy" th:value="${session.userId}" />

            <input type="text"
                   name="title"
                   class="new-thread-input"
                   placeholder="Start a new discussion..."
                   required />

            <button type="submit" class="btn-primary-custom mt-3">Post Discussion</button>
        </form>
    </div>

</div>

<th:block th:replace="~{fragments/footer :: footer}"></th:block>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>